# `ant_simulator` Layout

The `ant_simulator` directory hosts the hardware evaluation toolchain used to model ANT and baseline accelerators. Below is a breakdown of its sub-folders and the principal Python modules developers interact with.

```
ant_simulator/
├── run_ant.py                     # Entry script that sweeps benchmarks and writes cycle/energy CSVs
├── bitfusion/                     # BitFusion-based accelerator modelling code
│   ├── graph_plot/                # Optional plotting helpers
│   │   ├── barchart.py            # Utilities for bar-chart visualisation of sweep outputs
│   │   └── stackedbarchart.py     # Stacked bar chart plotting routines
│   ├── sram/
│   │   ├── cacti_sweep.py         # Wrapper that drives CACTI to obtain SRAM energy/area numbers
│   └── src/                       # Core simulator, benchmark definitions, and tools
│       ├── benchmarks/
│       │   ├── benchmarks.py      # Builds DNNWeaver graphs for each benchmark network
│       │   ├── ant_bench.py       # ANT quantisation benchmark layer configurations
│       │   ├── ant_weight_bench.py# Weight-stationary variant configurations
│       │   ├── bitfusion_bench.py # Original BitFusion accelerator layer configs
│       │   ├── adafloat_bench.py  # AdaFloat baseline configurations
│       │   ├── olaccel_bench.py   # OLAccel baseline configurations
│       │   └── biscaled_bench.py  # BiScaled baseline configurations
│       ├── experiments/
│       │   ├── architecture_optimization.py
│       │   └── ideal_benefits_variable_precision.py
│       ├── optimizer/optimizer.py # Loop tiling/order search and fast stats estimation
│       ├── simulator/
│       │   ├── simulator.py       # High-level simulator orchestrating stats collection
│       │   ├── accelerator.py     # Hardware parameter container & compute-cycle model
│       │   ├── energy.py          # Dataclass describing per-resource energy costs
│       │   ├── loop_stack.py      # Instruction stack used for scheduling and promotion
│       │   ├── pipeline.py        # Simple pipeline model for overlapping memory/compute
│       │   └── stats.py           # Accumulates cycles, memory traffic, and energy data
│       ├── sweep/sweep.py         # Batch sweep utility that caches simulator runs in CSV
│       └── utils/utils.py         # Shared math helpers (ceil divisions, dataframe lookups, etc.)
│
├── dnnweaver2/                    # Neural network graph construction and tensor primitives
│   ├── graph.py                   # Core graph object used to register operations
│   ├── tensor.py                  # Tensor abstraction utilised by benchmarks
│   ├── tensorOps/cnn.py           # Convolution/FC layer helpers built on DNNWeaver
│   ├── tensorOps/NodeOp.py        # Base class for tensor operations
│   ├── optimizer/optimizer.py     # Graph-level optimisation routines
│   ├── simulator/{accelerator,loop_stack,stats}.py  # Reference simulator components
│   ├── scalar/{dtypes,ops}.py     # Fixed-point data types and scalar operations
│   └── tf_utils/{dataset,helper}.py # Dataset utilities for TensorFlow-based inputs
│
├── docs/                          # LaTeX/figure assets describing simulator evaluation
└── results/                       # Output CSVs generated by `run_ant.py`
```

> Note: The DNNWeaver2 modules are mostly upstream code but remain essential—they generate the operator graphs consumed by `bitfusion/src/benchmarks.py` and the simulator.

